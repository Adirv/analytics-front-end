<div class="kReport kOverrideFAIcons">
  <span class="kTitle">{{'app.bandwidth.publisherStorage' | translate}}</span>
  <app-date-filter [dateRangeType]="_dateRangeType" (filterChange)="onDateFilterChange($event)" (filterReady)="onFilterReady()"></app-date-filter>

    <div class="kFilter">
      <p-dropdown [options]="_metrics" [(ngModel)]="_selectedMetrics" (onChange)="onMetricsChange($event)"></p-dropdown>
      <button pButton class="kButtonDefault" [label]="'app.common.exportCsv' | translate"></button>
    </div>


  <k-area-blocker [message]="_blockerMessage" [showLoader]="_isBusy">
    <div style="display: flex; flex-direction: column">

      <div class="kChart">
        <ngx-charts-bar-vertical *ngIf="_chartDataLoaded && _reportInterval==='months'"
          [results]="_chartData[_selectedMetrics]"
          [gradient]="false"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          >
        </ngx-charts-bar-vertical>

        <ngx-charts-line-chart *ngIf="_chartDataLoaded && _reportInterval==='days'"
          [results]="_chartData[_selectedMetrics]"
          [gradient]="false"
          [xAxis]="true"
          [yAxis]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [autoScale]="true"
          >
        </ngx-charts-line-chart>
      </div>

      <div class="kTotals">
        <div *ngFor="let total of _totalsData" class="kTotal">
          <span class="kTitle">{{total.label}}</span>
          <span class="kValue">{{total.value}}</span>
        </div>
      </div>

      <p-table [value]="_tableData" (sortFunction)="_onSortChanged($event)" [customSort]="true"  [scrollable]="true" sortField="bandwidth_consumption" [sortOrder]="-1">
        <ng-template pTemplate="header">
          <tr>
            <th *ngFor="let col of _columns" [pSortableColumn]="col">
              {{'app.bandwidth.' + col | translate}}
              <p-sortIcon [field]="col"></p-sortIcon>
            </th>

          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
          <tr>
            <td *ngFor="let col of _columns">
              {{data[col]}}
            </td>
          </tr>
        </ng-template>
      </p-table>

    </div>




  </k-area-blocker>

</div>

